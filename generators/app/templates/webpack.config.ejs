'use strict';
var path = require("path");

module.exports = function(env) {

  var isDev = env === 'dev';

  var scriptsSrc = "<%= scriptsPath %>",
    libSrc = isDev ? "<%= libPath %>" : "build/lib/",
    appSrc = isDev ? scriptsSrc + 'app.js' : "build/app.js",
    destination = "app/dist/";

  return {

    entry: {
      app: [path.resolve(appSrc)]
    },

    <% if (useTypeInfo) { %>
    alias: {
      "yfiles-typeinfo": path.resolve(scriptsSrc + "yfiles-typeinfo.js")
    }
    <% } %>

    resolve: {
      modules: ['node_modules', path.resolve(libSrc)],
    },

    output: {
      path: path.resolve(__dirname, destination),
      publicPath: "dist",
      filename: 'bundle.js'
    },

    devServer: {
      contentBase: [path.join(__dirname, './app')],
      compress: true,
      port: 9003
    }
  };

};
